<%= render user_signed_in? ? "../views/navbar_loggedin" : "../views/navbar_notloggedin" %>


<div class="container">
  <div class="d-flex">
    <div>
      <div class="d-flex justify-content-between">
        <h1 class="mt-3"><%= @listing.name %></h1>
        <div class="d-flex update-listing">
          <%= link_to 'Update', edit_listing_path(@listing), class: "btn btn-gradient mx-2 my-3" %>
          <%= link_to 'Delete', listing_path(@listing), class: "btn btn-gradient mx-2 my-3", method: :delete, data: { confirm: 'Are you sure you want to delete this listing?' } %>
        </div>
      </div>
      <div class="card-trip mt-2">
        <img src="<%= cl_image_path @listing.photo.key %>">
        <div class="card-trip-infos">
          <div class="d-flex flex-column justify-content-between h-100">
            <div>
              <h2><%= @listing.name %> | <%= @listing.vehicle_type %></h2>
              <p><%= @listing.description %></p>
            </div>
            <div>
              <h2>Where can you find me?</h2>
              <p><%= @listing.country %></p>
              <p><%= @listing.city %></p>
            </div>
          </div>
          <h2 class="card-trip-pricing"><%= @listing.price %>â‚¬</h2>
          <img src="https://kitt.lewagon.com/placeholder/users/krokrob" class="card-trip-user avatar-bordered" />
        </div>
      </div>
    </div>
    <div class="d-flex flex-column m-4">
      <% @listing.bookings.each do |booking| %>
        <div class="d-flex flex-column card pt-3 px-3 my-3">
          <h2 class="text-center">Reservation by <strong><%= booking.user.first_name %> <%= booking.user.last_name %></strong></h2>
          <div class="d-flex justify-content-around"><h5><em>Start date:</em></h5><p><%= booking.start_date %></p></div>
          <div class="d-flex justify-content-around"><h5><em>End date:</em></h5><p><%= booking.end_date %></p></div>
        </div>
      <% end %>
    </div>
  </div>
</div>



<%= render "../views/footer" %>
